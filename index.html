<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>C.U.L.O.</title>
    <!--<link href="./output.css" rel="stylesheet"> -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.5.1/flowbite.min.css" rel="stylesheet" />
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
</head>
  <body>

    <div id="site" class="flex flex-col justify-center items-center my-auto mx-auto">

      <!--NAVBAR-->
      <div id="navbar">
             <nav class="bg-neutral-primary fixed w-full z-50 top-0 start-0 relative border-default">
          <div class="max-w-screen-xl flex flex-wrap items-center justify-between mx-auto p-4">
            <a href="./index.html" class="flex items-center space-x-3 rtl:space-x-reverse">
                <img src="https://flowbite.com/docs/images/logo.svg" class="h-7" alt="Flowbite Logo" />
                <span class="self-center text-xl text-heading font-semibold whitespace-nowrap">Campionato Ufficiale dei Ludopatici Offesi</span>
            </a>
            <button data-collapse-toggle="navbar-dropdown" type="button" class="inline-flex items-center p-2 w-10 h-10 justify-center text-sm text-body rounded-base md:hidden hover:bg-neutral-secondary-soft hover:text-heading focus:outline-none focus:ring-2 focus:ring-neutral-tertiary" aria-controls="navbar-dropdown" aria-expanded="false">
                <span class="sr-only">Open main menu</span>
                <svg class="w-6 h-6" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5 7h14M5 12h14M5 17h14"/></svg>
            </button>
            <div class="hidden w-full md:block md:w-auto" id="navbar-dropdown">
              <ul class="flex flex-col font-medium p-4 md:p-0 mt-4 border border-default rounded-base bg-neutral-secondary-soft md:space-x-8 rtl:space-x-reverse md:flex-row md:mt-0 md:border-0 md:bg-neutral-primary">
                <li>
                  <a href="#" class="block py-2 px-3 text-white bg-brand rounded md:bg-transparent md:text-fg-brand md:p-0" aria-current="page">Home</a>
                </li>
                <li>
                    <button id="dropdownNvbarButton" data-dropdown-toggle="dropdownNavbar" class="flex items-center justify-between w-full py-2 px-3 rounded font-medium text-heading md:w-auto hover:bg-neutral-tertiary md:hover:bg-transparent md:border-0 md:hover:text-fg-brand md:p-0">
                      Scopri i giochi
                      <svg class="w-4 h-4 ms-1.5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m19 9-7 7-7-7"/></svg>
                  </button>
                  <!-- Dropdown menu -->
                  <div id="dropdownNavbar" class="z-[999] hidden absolute bg-white border border-gray-600 rounded-xl shadow-xl w-44">
                      <ul class="p-4 text-sm text-black font-medium space-y-1">
                          <li><a href="#" class="block p-2 hover:bg-gray-200 rounded">Dashboard</a></li>
                          <li><a href="#" class="block p-2 hover:bg-gray-200 rounded">Settings</a></li>
                          <li><a href="#" class="block p-2 hover:bg-gray-200 rounded">Earnings</a></li>
                          <li><a href="#" class="block p-2 hover:bg-gray-200 rounded">Sign out</a></li>
                      </ul>
                  </div>

                </li>
                <li>
                  <a href="./regolamento.html" class="block py-2 px-3 text-heading rounded hover:bg-neutral-tertiary md:hover:bg-transparent md:border-0 md:hover:text-fg-brand md:p-0 md:dark:hover:bg-transparent">Regolamento</a>
                </li>
                <li>
                  <a href="./reclami.html" class="block py-2 px-3 text-heading rounded hover:bg-neutral-tertiary md:hover:bg-transparent md:border-0 md:hover:text-fg-brand md:p-0 md:dark:hover:bg-transparent">Presenta reclamo</a>
                </li>
                <li>
                  <a href="#" class="block py-2 px-3 text-heading rounded hover:bg-neutral-tertiary md:hover:bg-transparent md:border-0 md:hover:text-fg-brand md:p-0 md:dark:hover:bg-transparent">Contatti</a>
                </li>
              </ul>
            </div>
          </div>
        </nav>
      </div>

      <!--CAROSELLO-->
      <div class="w-full max-w-4xl mx-auto p-4 my-8"> 
        <div id="default-carousel" class="relative w-full" data-carousel="slide">
            <!-- Carousel wrapper -->
            <div class="relative h-56 overflow-hidden rounded-base md:h-96">
            </div>
            <!-- Slider indicators -->
            <div style="position: absolute; left: 50%; bottom: 20px; transform: translateX(-50%); z-index: 30; display: flex; gap: 12px;">
                <button type="button" 
                        class="w-3 h-3 rounded-full bg-white/50 hover:bg-white transition-all duration-200" 
                        aria-current="true" aria-label="Slide 1" data-carousel-slide-to="0"></button>
                <button type="button" 
                        class="w-3 h-3 rounded-full bg-white/50 hover:bg-white transition-all duration-200" 
                        aria-current="false" aria-label="Slide 2" data-carousel-slide-to="1"></button>
                <button type="button" 
                        class="w-3 h-3 rounded-full bg-white/50 hover:bg-white transition-all duration-200" 
                        aria-current="false" aria-label="Slide 3" data-carousel-slide-to="2"></button>
                <button type="button" 
                        class="w-3 h-3 rounded-full bg-white/50 hover:bg-white transition-all duration-200" 
                        aria-current="false" aria-label="Slide 4" data-carousel-slide-to="3"></button>
            </div>

        </div>
      </div>

      <!--CLASSIFICA-->
      <div id="classifica" class="relative overflow-x-auto bg-neutral-primary-soft shadow-xs rounded-base border border-default">
          <table id="tabella" class="w-full text-sm text-left rtl:text-right text-body">
              <thead class="text-sm text-body bg-neutral-secondary-soft border-b rounded-base border-default">
                  <tr>
                      <th scope="col" class="px-6 py-3 font-medium"></th>
                      <th scope="col" class="px-6 py-3 font-medium"></th>
                      <th scope="col" class="px-6 py-3 font-medium"></th>
                      <th scope="col" class="px-6 py-3 font-medium"></th>
                      <th scope="col" class="px-6 py-3 font-medium"></th>
                  </tr>
              </thead>
              <tbody id="tabella-body"></tbody>
          </table>
      </div>

    </div>
    
    <!-- Flowbite per carosello -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.5.1/flowbite.min.js"></script>

    <script>
    // TABELLA
    fetch("https://docs.google.com/spreadsheets/d/13hQNh69NUj4RiIkBvYoKL3lyY0Aptcxifw6TGupOYwo/gviz/tq?tqx=out:csv&sheet=Foglio1")
      .then(res => res.text())
      .then(csv => {
        const rows = csv.trim().split("\n");
        let html = "";
        
        const headers = rows[0].split(",")
          .map(cell => cell.trim().replace(/^\"|\"$/g, ''))
          .filter(cell => cell !== "");
        
        const headerRow = document.querySelector("#tabella thead tr");
        headers.slice(0,5).forEach((header, i) => {
          headerRow.children[i].textContent = header;
        });
        
        for (let i = 1; i < rows.length; i++) {
          const cells = rows[i].split(",")
            .map(cell => cell.trim().replace(/^\"|\"$/g, ''))
            .filter(cell => cell !== "")
            .slice(0,5);
          
          if (cells.length > 0) {
            const isEvenRow = i % 2 === 0;
            html += `
              <tr class="bg-neutral-primary border-b ${isEvenRow ? 'border-default' : ''}">
                <th scope="row" class="px-6 py-4 font-medium text-heading whitespace-nowrap italic">${cells[0] || ''}</th>
                <td class="px-6 py-4 font-bold">${cells[1] || ''}</td>
                <td class="px-6 py-4">${cells[2] || ''}</td>
                <td class="px-6 py-4">${cells[3] || ''}</td>
                <td class="px-6 py-4">${cells[4] || ''}</td>
              </tr>`;
          }
        }
        
        document.getElementById("tabella-body").innerHTML = html;
      });

    // CAROSELLO
    document.addEventListener('DOMContentLoaded', function() {
      const immagini = [
        "Bang.jpg",
        "CardsAgainstHumanity.jpg",
        "Exploding.jpg",
        "mario-kart-world.jpg",
        "MarioParty.jpg",
        "Overcooked.jpg",
        "Poker.jpg",
        "SmashBros.jpg",
        "Ticket.jpg"
      ];
      
      const carouselContainer = document.querySelector('.relative.h-56.overflow-hidden');
      if (!carouselContainer) return;
      
      immagini.forEach((nomeImmagine) => {
        const itemDiv = document.createElement('div');
        itemDiv.className = 'hidden duration-700 ease-in-out';
        itemDiv.setAttribute('data-carousel-item', '');
        
        const img = document.createElement('img');
        img.src = `./img/${nomeImmagine}`;
        img.className = 'block w-full h-full object-contain bg-white';
        img.alt = nomeImmagine;
        
        itemDiv.appendChild(img);
        carouselContainer.appendChild(itemDiv);
      });

      const dotsContainer = document.querySelector('div[style*="position: absolute"][style*="bottom: 20px"]');
      if (dotsContainer) {
        dotsContainer.innerHTML = '';
        immagini.forEach((_, index) => {
          const dotButton = document.createElement('button');
          dotButton.type = 'button';
          dotButton.className = 'w-3 h-3 rounded-full bg-white/50 hover:bg-white transition-all duration-200';
          dotButton.setAttribute('aria-label', `Slide ${index + 1}`);
          dotButton.setAttribute('data-carousel-slide-to', index);
          if (index === 0) {
            dotButton.setAttribute('aria-current', 'true');
          }
          dotsContainer.appendChild(dotButton);
        });
      }
    });
    </script>

  </body>
</html>
